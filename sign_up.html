<!DOCTYPE html>

<html>
<title>Sign Up</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="signup.css">
<link href="https://fonts.googleapis.com/css?family=Nunito&display=swap" rel="stylesheet">

<script>
  function t() {

    var email_valid = validateEmail();
	if (!email_valid){
		return;
	}
    var PW_valid = validatePW();
    if (!PW_valid){
      return;
    }
    var names_valid = checkNames();
    if (!names_valid){
      return;
    }
    if (email_valid && PW_valid && names_valid){
      window.location.replace('sign_up_1.html');
    }

      name = document.accountInfo.fname.value;
      localStorage.setItem("username", JSON.stringify(name));
  }
</script>

<script>
  function validateEmail() {
         var emailID = document.accountInfo.email.value;
         atpos = emailID.indexOf("@");
         dotpos = emailID.lastIndexOf(".");

         if (atpos < 1 || ( dotpos - atpos < 2) || !emailID.includes("northwestern.edu")) {
            alert("Please enter a valid NU email address");
            document.accountInfo.email.focus();
            return false;
         }
         return( true );
      }
</script>

<script>
  function validatePW() {
    var pw = document.accountInfo.password.value;
    var cpw = document.accountInfo.password_confirm.value;
    if (pw.length < 8){
      alert("Passwords must be at least 8 characters long");
      document.accountInfo.password.focus();
      return false;
    }
    else if (pw != cpw){
      alert("Passwords must match");
      document.accountInfo.password_confirm.focus();
      return false;
    }
    return true;
  }
</script>

<script>
  function checkNames() {
    var f = document.accountInfo.fname.value;
    var l = document.accountInfo.lname.value;
    if (f.length == 0 || l.length == 0){
      alert("Please enter your first and last name");
      document.accountInfo.fname.focus();
      return false;
    }
    return true;
  }
</script>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

<body>
<h1 id="AcctInfo" class="text-center"> Sign Up</h1>
<h2 class="text-center">Find study partners today!</h2>


  <form id="accountInfo" name="accountInfo">

    <div class="field form-group container">
          <span for="fname">First Name </span>
          <input type="text" class="form-control form-control-lg" id="fname" name="fname" placeholder="Willie">
      </div>

      <div class="field form-group container">
          <span for="lname">Last Name </span>
          <input type="text" class="form-control form-control-lg" id="lname" name="lname" placeholder="Wildcat">
      </div>
      <div class="field form-group container">
          <span for="email">Email </span><br>
          <input type="email" class="form-control form-control-lg" id="email" name="email" placeholder="willie2022@u.northwestern.edu">
      </div>

      <div class="field form-group container">
          <span for="password">Password </span>
          <input id="password" class="form-control form-control-lg" name="password" type="password" minlength="7" title="Password must be at least 7 characters." placeholder="***********">
      </div>

      <div class="field form-group container">
          <span id="confirmPassword">Confirm Password </span>
          <input name="password_confirm" class="form-control form-control-lg" type="password" id="password_confirm" placeholder="***********" oninput="check(this)" />
          <script language='javascript' type='text/javascript'>
            function check(input) {
              if (input.value != document.getElementById('password').value) {
                input.setCustomValidity('Password Must be Matching.');
              } else {
                // input is valid -- reset the error message
                input.setCustomValidity('');
              }
            }
          </script>
<!-- <br /> -->
<div>

  </form>
<!-- </br> -->
<div class="text-center">
  <button id="createaccount" type="button" onclick="t()" class="btn btn-primary BTN">Create Account</button>

<!-- </br> -->
  <p id="goBack">Already have an account? <a href="./sign_in.html" id="signIn">Sign In</a></p>
</div>
</body>

</html>
